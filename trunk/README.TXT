VPSERVER 3.0

Авторские права (С) Иванов Виктор 2009 год
Распространяется на условиях GNU GPL v2 (файл License.txt)

I. Конфигурация

 Для запуска программы необходим конфигурационный файл config.conf (в Windows он должен находиться в той же папке, что и программа, а в POSIX-системах - в папке /etc/vpserver).

 Файл разделяется на секции.

 1. Параметры без секции
  Параметры без секции не допускаются.

 2. Секция [Server = ServerName], ServerName - Имя сервера
  Определяет настройки для сервера ServerName. Сервер Main - главный, после определения его настроек они будут применятся ко всем последующим серверам.

  2.1. HomeDir
   Определяет домашний каталог сервера. Допускается использовать переменные окружения (%*%).
   Значение по умолчанию: %ServerDir%

  2.2. IP
   Определяет IP-адрес прослушивания.
   Значение по умолчанию: 0.0.0.0

  2.3. LogLevel
   Определяет уровень журналирования действий сервера. Допускаются значения: 0 (отладочный режим), 1 (полный), 2 (ограниченный).
   Значение по умолчанию: 2

  2.4. Port
   Определяет порт для прослушивания.
   Значение по умолчнию: 80

  2.5. ReadWait
   Определяет время ожидания для получения данных.
   Значение по умолчанию: 5000

  2.6. KeepAliveTimeout
   Определяет время ожидания для KeepAlive-соединения.
   Значение по умолчанию: 5000

 3. Секция StartupCommands
  В этой секции должны быть перечислены все команды, которые должны быть выполнены при выполнении команд.
  Подробнее о командах смотри в главе II

 4. Секция EndCommands
  Аналогична StartupCommands. Команды выполняются при завершении программы

Пример конфигурационного файла:

[Plugins]
%ServerDir%\CGI.DLL,1
%ServerDir%\PHP.DLL,1
%ServerDir%\SSL.DLL,1

[Server=Main]
IP=127.0.0.1
Port=80
HomeDir=%ServerDir%\localhost\admin
LogLevel=2
ReadWait=2147483648
KeepAliveWait=15000
SSL=no

[Aliases=Main]
/cgi-bin/*=*,application/cgi
*.php=*,application/php

[Server=192.168.0.1:80]
IP=192.168.0.1
Port=80
HomeDir=Z:\WEB
ReadWait=5000

[Server=192.168.0.1:443]
IP=192.168.0.1
Port=443
HomeDir=%ServerDir%
SSL=yes

[StartupCommand]
Start Main
Start 192.168.0.1:80
Start 192.168.0.1:443
StartLog 192.168.0.1:80
StartLog 192.168.0.1:443

[EndCommands]
StopLog 192.168.0.1:443
StopLog 192.168.0.1:80
Stop 192.168.0.1:443
Stop 192.168.0.1:80
Stop Main

Минимальная кофигурация:
[Server=Main]
[EndCommands]
Stop Main

II. Команды

 1. START имя_сервера
  Запускает сервер имя_сервера
 2. STOP имя_сервера
  Отсанавливает сервер имя_сервера
 3. QUIT
  Завершает работу программы